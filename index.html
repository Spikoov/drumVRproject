<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-aabb-collider-component@3.1.0/dist/aframe-aabb-collider-component.min.js"></script>
  </head>
  <body>
    <a-scene cursor="rayOrigin: mouse" raycaster>
      <a-text value="v0.1.1" position="-1 2 -3"></a-text>
      <!--Assets-->
      <a-assets>
        <!--Images-->
        <img id="sky" src="https://raw.githubusercontent.com/Spikoov/drumVRproject/main/img/skybox.jpg" crossorigin="">
        <img id="drum" src="https://raw.githubusercontent.com/Spikoov/drumVRproject/main/img/drum.jpg" crossorigin="">
        <img id="cymbal" src="https://raw.githubusercontent.com/Spikoov/drumVRproject/main/img/cymbal.jpg" crossorigin="">
      </a-assets>
      <!-- Mains -->
      <a-entity id="leftHand" tracked-controls="hand: left; idPrefix: OpenVR; autoHide: true" gltf-model="src:url(https://cdn.aframe.io/controllers/hands/leftHandLow.glb)">
      </a-entity>
      <a-entity id="rightHand" tracked-controls="hand: right; idPrefix: OpenVR; autoHide: true" gltf-model="src:url(https://cdn.aframe.io/controllers/hands/rightHandLow.glb)">
      </a-entity>
      <!-- Lumière -->
      <a-entity position="0 3 0" light="type: point; color: #ddf"></a-entity>
      <!-- Les cylindres -->
        
      <a-cylinder cylindre1 aabb-collider="objects: #leftHand" id="snare" src="#drum" position="-1.20 0 -0.5" radius="0.5" rotation="20 90 0" height="0.2"
                  sound="src: url(sound/snare.mp3); on: click; poolSize:10"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cylinder>
      <a-cylinder id="high-tom" src="#drum" position="-0.4 0.6 -1.25" rotation="0 90 30" radius="0.4" height="0.2"
                  sound="src: url(sound/tom-c.mp3); on: click; poolSize:10"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cylinder>
      <a-cylinder id="mid-tom" src="#drum" position="0.5 0.6 -1.25" rotation="0 90 30" radius="0.4" height="0.2"
                  sound="src: url(sound/tom-b.mp3); on: click; poolSize:10"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cylinder>
      <a-cylinder id="low-tom" src="#drum" position="1.36 0 -0.5" radius="0.5" rotation="-30 90 0" height="0.2"
                  sound="src: url(sound/tom-a.mp3); on: click; poolSize:10"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cylinder>
      <script>
        AFRAME.registerComponent("cylindre1", {
          init: function() {
            this.el.addEventListener("hitstart", (e) => {
              var audioCylindre1 = new Audio('https://raw.githubusercontent.com/Spikoov/drumVRproject/main/sound/snare.mp3')
              audioCylindre1.play()
              console.log("dans le listener")
            })
          }
        })
      </script>

      <!-- Les symballes -->
      <a-cone id="hi-hat" src="#cymbal" position="-1.4 0.7 -1" geometry="primitive: cone; height: 0.15; radiusBottom: 0.5; " rotation="-20 230 0"
                  sound="src: url(sound/hi-hat.mp3); on: click; poolSize:10"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cone>
      <a-cone id="crash" src="#cymbal" position="-0.80 1.25 -1" geometry="primitive: cone; height: 0.15; radiusBottom: 0.4; " rotation="-40 210 20"
                  sound="src: url(sound/crash.mp3); on: click; poolSize:100"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cone>
      <a-cone id="ride" src="#cymbal" position="1 1.25 -1" geometry="primitive: cone; height: 0.15; radiusBottom: 0.5; " rotation="-40 140 -10"
                  sound="src: url(sound/ride.mp3); on: click; poolSize:100"
                  event-set__enter="_event: mousedown; color: #ff5959"
                  event-set__leave="_event: mouseup; color: #fff"></a-cone>
      <!-- La déco -->
      <a-cylinder position="-1.4 -0.3 -1" height="1.85" radius="0.02" color="#888"></a-cylinder>
      <a-cylinder position="-0.80 0 -1" height="2.3" radius="0.02" color="#888"></a-cylinder>
      <a-cylinder position="1 0 -1" height="2.3" radius="0.02" color="#888"></a-cylinder>
      <a-cylinder position="-1.20 -0.7 -0.5" height="1.2" radius="0.02" color="#888"></a-cylinder>
      <a-cylinder position="1.36 -0.7 -0.5" height="1.2" radius="0.02" color="#888"></a-cylinder>
      <a-cylinder position="0.1 0.40 -1" height="1.8" radius="0.02" rotation="90 90" color="#888"></a-cylinder>
      <a-cylinder position="-1.10 0 -1" height="0.6" radius="0.02" rotation="90 90" color="#888"></a-cylinder>
      <a-cylinder position="1.175 -0.5 -0.75" height="0.6" radius="0.02" rotation="90 90 53" color="#888"></a-cylinder>
      <a-cone position="-1.4 -1.1 -1" geometry="primitive: cone; height: 0.1; radiusBottom: 0.2;" color="#7b3d31"></a-cone>
      <a-cone position="-0.80 -1.1 -1" geometry="primitive: cone; height: 0.1; radiusBottom: 0.2;" color="#7b3d31"></a-cone>
      <a-cone position="1 -1.1 -1" geometry="primitive: cone; height: 0.1; radiusBottom: 0.2;" color="#7b3d31"></a-cone>
      <a-cone position="-1.20 -1.1 -0.5" geometry="primitive: cone; height: 0.1; radiusBottom: 0.2;" color="#7b3d31"></a-cone>
      <a-cone position="1.36 -1.1 -0.5" geometry="primitive: cone; height: 0.1; radiusBottom: 0.2;" color="#7b3d31"></a-cone>
      <!-- Le sol -->
      <a-circle position="0 -100 0" rotation="-90  0" radius="170" color="#403228"></a-circle>
      <!-- Le ciel -->
      <a-sky src="#sky" rotation="0 180 0"></a-sky>
    </a-scene>
  </body>
</html>
